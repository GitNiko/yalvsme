使用lerna改造前端项目
===========================
在用到lerna前，大概解释下关于代码管理的两种模式，`monorepo`和`multirepo`。  

一般我们的前端应用会有由多个库组成,在`package.json`依赖组件库，工具库等等。除了应用代码使用单独一个仓库管理，组件库，工具库也都各自使用仓库管理代码。这种管理多个项目代码的方式就是`multirepo`。

当然还有另外一种管理方式，就是通过一个仓库管理，组件库，工具库的代码全都放在一个仓库中统一管理。

## 两种不同的代码管理模式(source control pattern)特点
### multirepo
- 不同的workflow，可以用自己擅长的工具
- 编程语言不同也不受影响
- 提交记录分开记录，互不影响
- 仓库可以比较小

### monorepo
- 由于在一个仓库中，需要统一的workflow，开发需要使用同样的工具
- 处理多语言会比较麻烦
- 提交记录在一起，回滚的时候会很麻烦
- 仓库会非常大

## 举个场景例子
- 多个不同域名下的前端应用对应不同的业务
- 使用相同的技术栈
- 共用组件库

### multirepo
- 项目对应各自仓库，修改组件库的时候需要升级版本号并且重新发布，依赖的项目也需要同样升级依赖的版本号  
- 每个项目的`.babel` `webpack` 格式化配置这些东西都需要拷贝一边
- 各自的CI也需要单独配置

### monorepo
- 组件库和应用放在同一个仓库，直接依赖，组件库改了可以直接看到效果
- 只需要一套项目配置
- CI不需要单独配置

但是我们希望能够保持组件库还能够单独发布出来，供有其他独立项目通过包依赖的方式使用，这个时候就需要lerna这个工具来帮助我们简化这件事.

## lerna
`A tool for managing JavaScript projects with multiple packages.` 